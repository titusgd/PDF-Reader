# 無網路環境翻譯使用說明

## ✅ 已實作：快取式離線翻譯

由於 Windows 環境下 PyTorch 存在 DLL 相容性問題，系統改用**快取式離線翻譯**方案。

## 📋 使用方式

### 第一步：在有網路時建立翻譯快取

1. 啟動應用程式（預設為線上模式）
2. 開啟 PDF 文件
3. 選取要翻譯的文字
4. 點擊「翻譯選取」
5. 翻譯結果會**自動儲存到本地快取**

### 第二步：切換到離線模式（可選）

如果您想**強制**只使用快取（不連網路），請修改：

**檔案**: `src/main_window.py`  
**第 98 行**:
```python
self.translation_manager = TranslationManager(use_offline=True)  # 改為 True
```

### 第三步：在無網路環境使用

1. 啟動應用程式
2. 選取**之前翻譯過**的文字
3. 點擊「翻譯選取」
4. 系統會從快取中讀取翻譯結果（即時顯示）

## 💡 工作原理

```
線上模式（預設）：
  選取文字 → 連線翻譯 → 顯示結果 → 自動儲存快取

離線模式：
  選取文字 → 查找快取 → 顯示結果（如果在快取中）
              ↓
          未在快取：顯示錯誤訊息
```

## 📂 快取檔案位置

Windows: `C:\Users\{您的用戶名}\.pdfreader_translation_cache.pkl`

## ⚡ 優勢

✅ **無依賴問題** - 不需要 PyTorch，避免 DLL 錯誤  
✅ **即時翻譯** - 快取的翻譯結果立即載入  
✅ **自動儲存** - 線上翻譯後自動建立快取  
✅ **輕量級** - 快取檔案通常小於 10MB  
✅ **穩定可靠** - 不會出現模型載入失敗  

## ⚠️ 限制

❌ **無法翻譯新文字** - 離線模式下，未快取的文字無法翻譯  
❌ **需預先準備** - 必須先在有網路時翻譯一次

## 🎯 適用場景

### ✅ 適合

- 重複查看相同的 PDF 文件
- 預先知道要翻譯的內容
- 需要快速查看之前的翻譯
- 無法使用 PyTorch 的 Windows 環境

### ❌ 不適合

- 需要翻譯全新、未見過的文字
- 完全沒有網路環境且無法預先準備

## 📝 實際操作範例

### 情境：在辦公室準備，在無網路實驗室使用

**在辦公室（有網路）**:
1. 開啟常用的英文 PDF
2. 逐段選取並翻譯（自動快取）
3. 關閉應用程式

**在實驗室（無網路）**:
1. 複製快取檔案到實驗室電腦
2. 開啟相同的 PDF
3. 選取文字→即時顯示翻譯（從快取）

## 🔧 進階：共享快取

**匯出快取**（辦公室電腦）:
```
複製檔案：
C:\Users\{用戶名}\.pdfreader_translation_cache.pkl
到 USB 隨身碟
```

**匯入快取**（實驗室電腦）:
```
從 USB 複製檔案到：
C:\Users\{用戶名}\.pdfreader_translation_cache.pkl
```

## 📊 效能

| 項目 | 線上模式 | 快取模式 |
|------|---------|---------|
| 翻譯速度 | 2-5秒 | <0.1秒 |
| 網路需求 | 需要 | 不需要 |
| 新文字 | ✅ 可翻譯 | ❌ 無法翻譯 |
| 重複文字 | 2-5秒 | <0.1秒 |

## ❓ 常見問題

### Q: 為什麼不使用真正的離線翻譯模型？

A: Windows 環境下 PyTorch 存在嚴重的 DLL 相容性問題，即使安裝 CPU 版本也無法解決。快取方案是最穩定的選擇。

### Q: 如何知道某段文字是否在快取中？

A: 直接嘗試翻譯，如果在快取中會立即顯示，如果不在會顯示錯誤訊息。

### Q: 快取會過期嗎？

A: 不會。快取會永久保存，直到您手動刪除。

### Q: 可以手動編輯快取嗎？

A: 技術上可以，但不建議。快取是 pickle 格式的二進位檔案。

## 📚 相關文檔

- 詳細說明：`OFFLINE_CACHE_TRANSLATION.md`
- 原始計劃：`OFFLINE_TRANSLATION_GUIDE.md`（PyTorch 方案）

## 🎓 總結

快取式離線翻譯是一個**實用且穩定**的解決方案，特別適合需要重複查看相同文件的場景。雖然無法翻譯全新文字，但對於大多數實際應用已經足夠。

### 建議工作流程

1. ✅ 日常使用：保持**線上模式**（預設），自動建立快取
2. ✅ 定期備份：複製快取檔案到安全位置
3. ✅ 無網路環境：使用快取翻譯（如需要可切換到離線模式）

---

**版本**: 1.0  
**建立日期**: 2025-11-03  
**狀態**: ✅ 可立即使用

